# ============================================
# Minimal Configuration for /chat Flow
# ============================================
# Copy this file to .env and fill in your actual values

# ============================================
# Multiline values in .env
# ============================================
# .env supports one value per line. For multiline content (PEM keys, JSON):
#
# 1) Use double quotes and write \n for each newline (python-dotenv turns \n into real newlines):
#
#    JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEF...\n-----END PUBLIC KEY-----"
#    JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG...\n-----END PRIVATE KEY-----"
#
# 2) For JSON (e.g. FIREBASE_SERVICE_ACCOUNT): use one line (minified). Escape internal " as \":
#
#    FIREBASE_SERVICE_ACCOUNT="{\"type\":\"service_account\",\"project_id\":\"my-project\",...}"
#
#    Or from a file: cat service-account.json | jq -c .  then paste and wrap in "...".

# ============================================
# Environment
# ============================================
# Set to "development" to make JWT authentication optional
# Set to "production" to require JWT authentication
ENVIRONMENT=development

# ============================================
# JWT Configuration (Required for Production)
# ============================================
# Option A: Inline PEM (see "Multiline values" above; use \n for newlines inside double quotes)
# JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIIB...\n-----END PUBLIC KEY-----"
# JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIE...\n-----END PRIVATE KEY-----"
# Option B: Path to key files (used if JWT_PUBLIC_KEY / JWT_PRIVATE_KEY are not set)
JWT_PUBLIC_KEY_PATH=jwt_public_key.pem
# JWT_PRIVATE_KEY_PATH=jwt_private_key.pem

# JWT algorithm (default: RS256)
# JWT_ALGORITHM=RS256

# ============================================
# Webview / App FE URL (for /auth/webview-url)
# ============================================
# Base URL of the frontend app (used in webview). token={jwt} is appended.
# APP_FE_URL=https://app.example.com

# Firebase: Option A = inline JSON (one line, see "Multiline values" above); Option B = file path
# FIREBASE_SERVICE_ACCOUNT="{\"type\":\"service_account\",\"project_id\":\"...\",...}"
# FIREBASE_SERVICE_ACCOUNT_PATH=service-account.json
# FIREBASE_SERVICE_ACCOUNT_2="{\"type\":\"service_account\",...}"
# FIREBASE_SERVICE_ACCOUNT_PATH_2=service-account-2.json

# ============================================
# LLM Configuration (Required)
# ============================================
# LLM Provider: 'openai', 'vllm', 'anthropic', or 'gemini'
LLM_PROVIDER=openai

# LLM Model Name
# For OpenAI: 'gpt-4', 'gpt-4-turbo', 'gpt-3.5-turbo', etc.
# For Anthropic: 'claude-3-5-sonnet-20241022', 'claude-3-opus-20240229', etc.
# For Gemini: 'gemini-2.5-pro', 'gemini-2.5-flash', 'gemini-2.0-flash', etc.
LLM_MODEL_NAME=gpt-4

# OpenAI API Key (required if LLM_PROVIDER=openai)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Anthropic API Key (required if LLM_PROVIDER=anthropic)
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Google/Gemini API Key (required if LLM_PROVIDER=gemini)
# Can use either GOOGLE_API_KEY or GEMINI_API_KEY
# GEMINI_API_KEY=your-gemini-api-key-here

# If using vllm provider, uncomment and set these:
# INFERENCE_ENDPOINT_URL=http://localhost:8000/v1
# INFERENCE_API_KEY=your-inference-api-key

# ============================================
# Marqo Configuration (Required for search_documents tool)
# ============================================
# Marqo endpoint URL (e.g., 'http://localhost:8882' or your Marqo instance URL)
MARQO_ENDPOINT_URL=http://localhost:8882

# Marqo index name (default: 'sunbird-va-index')
MARQO_INDEX_NAME=sunbird-va-index

# ============================================
# Redis Configuration (Required for caching)
# ============================================
# Redis connection settings (all read from env; defaults shown)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# Optional: set if your Redis requires auth
# REDIS_PASSWORD=
# Optional overrides (defaults in code):
# REDIS_KEY_PREFIX=sva-cache-
# REDIS_SOCKET_CONNECT_TIMEOUT=10
# REDIS_SOCKET_TIMEOUT=10
# REDIS_MAX_CONNECTIONS=100

# ============================================
# Optional: Server Configuration
# ============================================
# Server host and port (defaults shown)
# HOST=0.0.0.0
# PORT=8000

# ============================================
# Optional: CORS Configuration
# ============================================
# Comma-separated list of allowed origins (default: "*")
# ALLOWED_ORIGINS=*

# ============================================
# Optional: Observability (Not required for basic /chat flow)
# ============================================
# Logfire token for observability (optional)
# LOGFIRE_TOKEN=your-logfire-token-here

# Langfuse credentials for observability (optional)
# Get keys from: https://cloud.langfuse.com
# LANGFUSE_PUBLIC_KEY=pk-lf-...
# LANGFUSE_SECRET_KEY=sk-lf-...
# LANGFUSE_BASE_URL=https://cloud.langfuse.com  # EU region
# LANGFUSE_BASE_URL=https://us.cloud.langfuse.com  # US region

# Langfuse tracing: environment (production/staging/development)
# Organizes traces by deployment context. Max 40 chars, lowercase letters, numbers, hyphens, underscores.
# Default: "default" if unset. See: https://langfuse.com/docs/observability/features/environments
# LANGFUSE_TRACING_ENVIRONMENT=development

# Langfuse release: app version for A/B tests and metric tracking
# Use semantic version or git commit hash. Set in CI/CD. See: https://langfuse.com/docs/observability/features/releases-and-versioning
# LANGFUSE_RELEASE=v1.0.0

# ============================================
# TranslateGemma (use_translation_pipeline=true)
# ============================================
# vLLM endpoints for TranslateGemma models. Required when use_translation_pipeline=true.
# TRANSLATEGEMMA_4B_ENDPOINT=http://10.128.170.2:8081/v1
# TRANSLATEGEMMA_12B_ENDPOINT=http://10.128.170.2:8082/v1
# TRANSLATEGEMMA_27B_ENDPOINT=http://localhost:8085/v1
# TRANSLATEGEMMA_27B_BASE_ENDPOINT=http://localhost:18002/v1  # For *->English
# DEFAULT_TRANSLATION_MODEL=4b

# ============================================
# Optional: Other Services (Not required for basic /chat flow)
# ============================================
# These are optional and only needed if you use additional features:
# - Bhashini API (for translation)
# - Telemetry API (for logging)
# - AWS S3 (for file storage)
# - Other external services

# ============================================
# Farmer / Animal APIs (get_farmer_by_mobile, get_animal_by_tag)
# ============================================
# At least one of these must be set. Tools try amulpashudhan first, then herdman.
# PASHUGPT_TOKEN=        # amulpashudhan.com (GetFarmerDetailsByMobile, GetAnimalDetailsByTagNo)
# PASHUGPT_TOKEN_2=      # amuldairy CVCC (get_cvcc_health_details)
# PASHUGPT_TOKEN_3=      # herdman.live (get-amul-farmer, get-amul-animal)

# Uncomment if needed:
# BHASHINI_API_URL=
# BHASHINI_API_KEY=
# TELEMETRY_API_URL=https://vistaar.kenpath.ai/observability-service/action/data/v3/telemetry
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=
# AWS_S3_BUCKET=
